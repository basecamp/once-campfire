# Campfire Configuration Example
# Copy this file to .env.production and customize for your deployment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server bind address and port
CAMPFIRE_HOST=0.0.0.0
CAMPFIRE_PORT=3000

# Request handling
CAMPFIRE_REQUEST_TIMEOUT=30
CAMPFIRE_MAX_REQUEST_SIZE=16777216  # 16MB
CAMPFIRE_SHUTDOWN_TIMEOUT=30
CAMPFIRE_WORKER_THREADS=0  # 0 = auto-detect

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database file path
CAMPFIRE_DATABASE_URL=campfire.db

# Connection pool settings
CAMPFIRE_DB_MAX_CONNECTIONS=10
CAMPFIRE_DB_TIMEOUT=30

# Performance settings
CAMPFIRE_DB_WAL_MODE=true

# Backup settings
CAMPFIRE_BACKUP_DIR=./backups
CAMPFIRE_BACKUP_RETENTION_DAYS=30
CAMPFIRE_BACKUP_COMPRESS=true
CAMPFIRE_BACKUP_BEFORE_MIGRATE=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: trace, debug, info, warn, error
CAMPFIRE_LOG_LEVEL=info

# Log format: json, pretty, compact
CAMPFIRE_LOG_FORMAT=pretty

# Structured logging
CAMPFIRE_LOG_STRUCTURED=false

# Log file path (leave empty for stdout only)
CAMPFIRE_LOG_FILE=

# Request tracing
CAMPFIRE_TRACE_REQUESTS=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# CORS settings (comma-separated origins, empty = allow all)
CAMPFIRE_CORS_ORIGINS=

# Rate limiting (requests per minute)
CAMPFIRE_RATE_LIMIT_RPM=60

# Session settings
CAMPFIRE_SESSION_TOKEN_LENGTH=32
CAMPFIRE_SESSION_EXPIRY_HOURS=24

# HTTPS settings
CAMPFIRE_FORCE_HTTPS=false
CAMPFIRE_TRUST_PROXY=false

# =============================================================================
# PUSH NOTIFICATIONS
# =============================================================================

# Enable push notifications
CAMPFIRE_PUSH_ENABLED=true

# VAPID keys (generate with: openssl ecparam -genkey -name prime256v1 -noout -out vapid_private.pem)
# Then convert to base64: openssl ec -in vapid_private.pem -pubout -outform DER | tail -c 65 | base64 | tr -d '=' | tr '/+' '_-'
CAMPFIRE_VAPID_PRIVATE_KEY=
CAMPFIRE_VAPID_PUBLIC_KEY=

# VAPID subject (email or URL)
CAMPFIRE_VAPID_SUBJECT=mailto:admin@campfire.local

# =============================================================================
# METRICS AND MONITORING
# =============================================================================

# Enable metrics collection
CAMPFIRE_METRICS_ENABLED=true

# Metrics endpoint
CAMPFIRE_METRICS_ENDPOINT=/metrics

# Detailed request metrics
CAMPFIRE_METRICS_DETAILED=false

# Response time histogram buckets (comma-separated)
CAMPFIRE_METRICS_BUCKETS=0.001,0.005,0.01,0.05,0.1,0.5,1.0,5.0,10.0

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core features
CAMPFIRE_FEATURE_WEBSOCKETS=true
CAMPFIRE_FEATURE_PUSH=true
CAMPFIRE_FEATURE_BOTS=true
CAMPFIRE_FEATURE_SEARCH=true
CAMPFIRE_FEATURE_SOUNDS=true

# Future features
CAMPFIRE_FEATURE_FILES=false

# =============================================================================
# RUST CONFIGURATION
# =============================================================================

# Rust logging (separate from application logging)
RUST_LOG=campfire_on_rust=info,tower_http=info,axum=info,sqlx=warn

# Rust backtrace (set to 1 for backtraces on panic)
RUST_BACKTRACE=0

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and customize these for production deployment

# Production server settings
# CAMPFIRE_HOST=0.0.0.0
# CAMPFIRE_PORT=3000
# CAMPFIRE_WORKER_THREADS=4

# Production database settings
# CAMPFIRE_DATABASE_URL=/app/data/campfire.db
# CAMPFIRE_DB_MAX_CONNECTIONS=20
# CAMPFIRE_BACKUP_DIR=/app/backups

# Production logging
# CAMPFIRE_LOG_LEVEL=info
# CAMPFIRE_LOG_FORMAT=json
# CAMPFIRE_LOG_FILE=/app/logs/campfire.log
# CAMPFIRE_LOG_STRUCTURED=true
# CAMPFIRE_TRACE_REQUESTS=false

# Production security
# CAMPFIRE_CORS_ORIGINS=https://campfire.yourdomain.com
# CAMPFIRE_RATE_LIMIT_RPM=120
# CAMPFIRE_FORCE_HTTPS=true
# CAMPFIRE_TRUST_PROXY=true

# Production metrics
# CAMPFIRE_METRICS_DETAILED=true