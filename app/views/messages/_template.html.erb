<script type="text/template" data-messages-target="template">
  <div class="message message--me $messageClasses$"
      id="message_$clientMessageId$"
      data-controller="reply swipe-reply tap-react"
      data-action="touchstart->swipe-reply#touchstart touchmove->swipe-reply#touchmove touchend->swipe-reply#touchend click->tap-react#tap"
      data-format-message-target="message"
      data-user-id="<%= Current.user.id %>"
      data-message-timestamp="$messageTimestamp$"
      data-messages-target="message"
      data-reply-composer-outlet="#composer"
      data-swipe-reply-composer-outlet="#composer">
    <div class="message__day-separator"><time class="message__timestamp" datetime="$messageDatetime$" data-local-time-target="date"></time></div>

    <figure class="avatar message__avatar">
      <%= avatar_tag Current.user %>
    </figure>

    <div class="message__body">
      <div class="message__body-content">
        <div class="message__meta">
          <h3 class="message__heading">
            <span class="message__author"><strong><%= Current.user.name %></strong></span>
            <span class="message__permalink"><time class="message__timestamp" datetime="$messageDatetime$" data-local-time-target="time"></time></span>
          </h3>
          <div class="message__actions">
            <div class="position-relative">
              <span class="btn message__action-btn message__options-btn">
                <%= image_tag "menu-dots-horizontal.svg", class: "colorize--black", aria: { hidden: "true" } %>
                <span class="for-screen-reader">Message options</span>
              </span>
            </div class="position-relative">
          </div>
        </div>
        $body$
      </div>
    </div>
  </div>
</script>
